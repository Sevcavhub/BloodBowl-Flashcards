<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Blood Bowl — Skills &amp; Traits Flashcards</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700;900&family=Cinzel:wght@400;600&family=Crimson+Pro:ital,wght@0,300;0,400;0,600;1,300;1,400&display=swap" rel="stylesheet">
<style>
  :root {
    --gold: #c9a84c;
    --gold-light: #f0d070;
    --gold-dark: #8a6a20;
    --blood: #8b1a1a;
    --blood-dark: #4a0a0a;
    --parchment: #f5e8c8;
    --ink: #1a0f0f;
    --safe-bottom: env(safe-area-inset-bottom, 0px);
  }

  * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

  html { height: 100%; }

  body {
    min-height: 100vh;
    min-height: 100dvh;
    background-color: #0d0604;
    background-image:
      radial-gradient(ellipse at 20% 20%, rgba(80,20,5,0.5) 0%, transparent 60%),
      radial-gradient(ellipse at 80% 80%, rgba(60,10,10,0.4) 0%, transparent 60%),
      url("data:image/svg+xml,%3Csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0v60M0 30h60' stroke='%23ffffff08' stroke-width='0.5'/%3E%3C/svg%3E");
    font-family: 'Crimson Pro', Georgia, serif;
    color: var(--parchment);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 16px calc(24px + var(--safe-bottom));
    overscroll-behavior: none;
  }

  /* ── HEADER ── */
  header { text-align: center; margin-bottom: 20px; width: 100%; }

  .title-emblem {
    font-family: 'Cinzel Decorative', serif;
    font-size: clamp(1.3rem, 6vw, 2.2rem);
    font-weight: 900;
    color: var(--gold-light);
    text-shadow: 0 0 20px rgba(201,168,76,0.4), 2px 2px 0 var(--blood-dark);
  }

  .title-sub {
    font-family: 'Cinzel', serif;
    font-size: clamp(0.6rem, 2.5vw, 0.85rem);
    letter-spacing: 0.3em;
    color: var(--gold-dark);
    margin-top: 5px;
    text-transform: uppercase;
  }

  .divider {
    width: min(280px, 80vw);
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
    margin: 12px auto 0;
    position: relative;
  }

  .divider::before {
    content: 'X';
    font-family: 'Cinzel', serif;
    font-size: 0.8rem;
    position: absolute; left: 50%; top: 50%;
    transform: translate(-50%, -50%);
    background: #0d0604; padding: 0 8px;
    color: var(--gold);
  }

  /* ── FILTER ── */
  .controls {
    display: flex; align-items: center; gap: 10px;
    margin-bottom: 18px; flex-wrap: wrap; justify-content: center;
    width: 100%;
  }

  .filter-label {
    font-family: 'Cinzel', serif;
    font-size: clamp(0.6rem, 2vw, 0.72rem);
    letter-spacing: 0.2em; color: var(--gold-dark); text-transform: uppercase;
  }

  .filter-select {
    background: rgba(20,8,4,0.9);
    border: 1px solid var(--gold-dark);
    color: var(--parchment);
    font-family: 'Cinzel', serif;
    font-size: clamp(0.65rem, 2.5vw, 0.75rem);
    padding: 10px 32px 10px 12px;
    border-radius: 2px; cursor: pointer; outline: none;
    appearance: none; -webkit-appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%238a6a20'/%3E%3C/svg%3E");
    background-repeat: no-repeat; background-position: right 10px center;
    min-height: 44px;
    touch-action: manipulation;
  }

  /* ── PROGRESS ── */
  .progress-container { width: min(580px, 92vw); margin-bottom: 14px; }

  .progress-bar {
    height: 2px;
    background: rgba(201,168,76,0.12);
    border-radius: 2px; overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--gold-dark), var(--gold-light));
    border-radius: 2px; transition: width 0.3s ease;
  }

  .progress-label {
    text-align: right;
    font-family: 'Cinzel', serif;
    font-size: clamp(0.55rem, 1.8vw, 0.62rem);
    color: var(--gold-dark); letter-spacing: 0.15em; margin-top: 5px;
  }

  /* ── CARD ── */
  .card-scene {
    perspective: 1200px;
    width: min(580px, 92vw);
    height: clamp(300px, 56vw, 400px);
    margin-bottom: 20px;
    cursor: pointer;
    touch-action: manipulation;
    -webkit-user-select: none;
    user-select: none;
  }

  .card {
    width: 100%; height: 100%; position: relative;
    transform-style: preserve-3d;
    transition: transform 0.55s cubic-bezier(0.4,0,0.2,1);
  }

  .card.flipped { transform: rotateY(180deg); }

  .card-face {
    position: absolute; inset: 0;
    backface-visibility: hidden; -webkit-backface-visibility: hidden;
    border-radius: 5px; overflow: hidden;
  }

  .card-front {
    background: linear-gradient(155deg, #2a0f08 0%, #1a0804 55%, #0e0402 100%);
    border: 2px solid var(--gold-dark);
    box-shadow: 0 0 0 1px rgba(201,168,76,0.1) inset, 0 20px 60px rgba(0,0,0,0.8), 0 0 40px rgba(139,26,26,0.12);
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    padding: clamp(24px, 6vw, 40px) clamp(24px, 8vw, 50px);
    text-align: center;
  }

  .card-back {
    background: linear-gradient(155deg, #f5e8c8 0%, #e8d4a0 55%, #d6be7a 100%);
    border: 2px solid var(--gold-dark);
    box-shadow: 0 0 0 1px rgba(201,168,76,0.25) inset, 0 20px 60px rgba(0,0,0,0.7);
    transform: rotateY(180deg);
    display: flex; flex-direction: column;
    padding: clamp(16px, 4vw, 28px) clamp(16px, 5vw, 36px);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  .corner-ornament {
    position: absolute;
    width: clamp(22px, 5vw, 36px);
    height: clamp(22px, 5vw, 36px);
    border-color: var(--gold-dark); border-style: solid; opacity: 0.45;
  }

  .corner-ornament.tl { top: 10px; left: 10px; border-width: 2px 0 0 2px; }
  .corner-ornament.tr { top: 10px; right: 10px; border-width: 2px 2px 0 0; }
  .corner-ornament.bl { bottom: 10px; left: 10px; border-width: 0 0 2px 2px; }
  .corner-ornament.br { bottom: 10px; right: 10px; border-width: 0 2px 2px 0; }

  .card-category {
    font-family: 'Cinzel', serif;
    font-size: clamp(0.5rem, 1.8vw, 0.62rem);
    letter-spacing: 0.4em; color: var(--gold-dark);
    text-transform: uppercase; margin-bottom: clamp(10px, 3vw, 18px);
  }

  .card-skill-name {
    font-family: 'Cinzel Decorative', serif;
    font-size: clamp(1.0rem, 4.5vw, 1.9rem);
    font-weight: 700;
    color: var(--gold-light);
    text-shadow: 0 0 25px rgba(240,208,112,0.25), 1px 1px 0 rgba(0,0,0,0.5);
    line-height: 1.2; margin-bottom: clamp(10px, 2.5vw, 14px);
  }

  .card-type-badge {
    display: inline-block; background: var(--blood); border: 1px solid var(--blood-dark);
    color: #ffd; font-family: 'Cinzel', serif;
    font-size: clamp(0.5rem, 1.8vw, 0.62rem);
    letter-spacing: 0.2em; padding: 4px 12px; border-radius: 2px;
    text-transform: uppercase; margin-bottom: clamp(10px, 3vw, 22px);
  }

  .reveal-hint {
    font-style: italic;
    font-size: clamp(0.7rem, 2.5vw, 0.82rem);
    color: rgba(201,168,76,0.35); margin-top: 8px;
  }

  .back-header {
    border-bottom: 1px solid rgba(138,106,32,0.4);
    padding-bottom: 8px; margin-bottom: 10px;
    flex-shrink: 0;
  }

  .back-name {
    font-family: 'Cinzel', serif;
    font-size: clamp(0.85rem, 3vw, 1.05rem);
    font-weight: 600; color: var(--ink);
  }

  .back-meta { display: flex; gap: 6px; margin-top: 5px; flex-wrap: wrap; }

  .back-badge {
    display: inline-block; background: var(--blood); color: #ffd;
    font-family: 'Cinzel', serif;
    font-size: clamp(0.44rem, 1.6vw, 0.52rem);
    letter-spacing: 0.15em; padding: 3px 8px; text-transform: uppercase;
  }

  .back-body {
    font-size: clamp(0.78rem, 2.8vw, 0.9rem);
    line-height: 1.65;
    color: #2a1a0a; font-weight: 300; flex: 1;
  }

  /* ── SWIPE HINT (mobile only) ── */
  .swipe-hint {
    font-family: 'Cinzel', serif;
    font-size: 0.55rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: rgba(138,106,32,0.35);
    margin-bottom: 10px;
    display: none;
  }

  @media (max-width: 600px) {
    .swipe-hint { display: block; }
  }

  /* ── NAV BUTTONS ── */
  .nav-row {
    display: flex; align-items: center;
    gap: clamp(8px, 3vw, 16px);
    width: min(580px, 92vw);
  }

  .btn {
    font-family: 'Cinzel', serif;
    font-size: clamp(0.6rem, 2.2vw, 0.72rem);
    letter-spacing: 0.18em; text-transform: uppercase;
    padding: clamp(12px, 3vw, 13px) clamp(12px, 3.5vw, 24px);
    border: 1px solid var(--gold-dark);
    background: rgba(20,8,4,0.85); color: var(--gold);
    cursor: pointer; border-radius: 2px; transition: all 0.18s;
    min-height: 48px;
    touch-action: manipulation;
    flex-shrink: 0;
  }

  .btn:active { transform: scale(0.96); opacity: 0.8; }

  .btn-reveal {
    background: var(--blood); border-color: #6a1010;
    color: #ffd;
    font-size: clamp(0.62rem, 2.4vw, 0.76rem);
    flex: 1;
  }

  .btn-shuffle {
    border-color: rgba(201,168,76,0.25);
    color: rgba(138,106,32,0.8);
    font-size: clamp(0.55rem, 2vw, 0.65rem);
    margin-top: 12px;
    width: min(580px, 92vw);
    min-height: 44px;
  }

  .keyboard-hint {
    margin-top: 14px;
    font-family: 'Cinzel', serif;
    font-size: 0.55rem;
    letter-spacing: 0.15em; color: rgba(138,106,32,0.35);
    text-align: center; text-transform: uppercase;
    display: none;
  }

  @media (min-width: 600px) {
    body { padding: 30px 20px 60px; }
    header { margin-bottom: 30px; }
    .keyboard-hint { display: block; }
    .card-scene { height: clamp(360px, 40vw, 400px); }
  }
</style>
</head>
<body>

<header>
  <div class="title-emblem">Blood Bowl</div>
  <div class="title-sub">Skills &amp; Traits Compendium</div>
  <div class="divider"></div>
</header>

<div class="controls">
  <span class="filter-label">Category:</span>
  <select class="filter-select" id="categoryFilter">
    <option value="ALL">All Categories</option>
    <option value="AGILITY">Agility</option>
    <option value="DEVIOUS">Devious</option>
    <option value="GENERAL">General</option>
    <option value="MUTATION">Mutation</option>
    <option value="PASSING">Passing</option>
    <option value="STRENGTH">Strength</option>
    <option value="TRAITS">Traits</option>
  </select>
</div>

<div class="progress-container">
  <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width:0%"></div></div>
  <div class="progress-label" id="progressLabel">1 / 0</div>
</div>

<div class="card-scene" id="cardScene">
  <div class="card" id="card">
    <div class="card-face card-front" id="cardFront">
      <div class="corner-ornament tl"></div>
      <div class="corner-ornament tr"></div>
      <div class="corner-ornament bl"></div>
      <div class="corner-ornament br"></div>
      <div class="card-category" id="frontCategory">AGILITY</div>
      <div class="card-skill-name" id="frontName">Catch</div>
      <div class="card-type-badge" id="frontType">ACTIVE</div>
      <div class="reveal-hint">Tap card to reveal</div>
    </div>
    <div class="card-face card-back" id="cardBack">
      <div class="back-header">
        <div class="back-name" id="backName">—</div>
        <div class="back-meta">
          <span class="back-badge" id="backCategory">—</span>
          <span class="back-badge" id="backType2">—</span>
        </div>
      </div>
      <div class="back-body" id="backBody">—</div>
    </div>
  </div>
</div>

<div class="swipe-hint">← swipe to navigate →</div>

<div class="nav-row">
  <button class="btn" onclick="prevCard()">&#9668; Prev</button>
  <button class="btn btn-reveal" id="flipBtn" onclick="handleCardClick()">Reveal</button>
  <button class="btn" onclick="nextCard()">Next &#9658;</button>
</div>

<button class="btn btn-shuffle" onclick="shuffleDeck()">&#8646; Shuffle Deck</button>

<div class="keyboard-hint">Arrow keys to navigate &nbsp;|&nbsp; Space to flip</div>

<script>
const ALL_CARDS = [
  {name:"Catch",category:"AGILITY",type:"ACTIVE",desc:"This player may re-roll any failed Agility Test when attempting to Catch the ball."},
  {name:"Diving Catch",category:"AGILITY",type:"ACTIVE",desc:"This player may attempt to Catch the ball if it lands in a square in their Tackle Zone as a result of a Pass, Throw-in or Kick-off (not a Bounce). Additionally, they may apply a +1 modifier to their Agility Test when attempting to Catch the ball as part of a Pass Action if they are in the target square."},
  {name:"Diving Tackle",category:"AGILITY",type:"ACTIVE",desc:"When an opposition player attempts to leave this player's Tackle Zone via Dodge, Leap or Jump, after all modifiers and re-rolls, this player may apply a -2 modifier to the opposition player's Agility Test and Placed Prone in the vacated square. Only one player with this Skill may use it at a time."},
  {name:"Dodge",category:"AGILITY",type:"ACTIVE",desc:"Once per Turn, this player may re-roll a single Agility Test when attempting to Dodge. This Skill also impacts the Stumble result when an opposition player performs a Block Action against this player."},
  {name:"Defensive",category:"AGILITY",type:"ACTIVE",desc:"During your opponent's Turns, opposition players Marked by this player cannot use the Guard or Put the Boot In Skills."},
  {name:"Hit and Run",category:"AGILITY",type:"ACTIVE",desc:"After performing a Block Action or Stab Special Action, this player may immediately move one free square ignoring Tackle Zones, so long as they are Standing and end up neither Marking nor Marked by any opposition players. Cannot have the Frenzy Skill."},
  {name:"Jump Up",category:"AGILITY",type:"ACTIVE",desc:"A Prone player with this Skill can stand up for free. They can also declare a Block Action while Prone by making an Agility Test (+1 modifier) — on success they stand and block; on failure they remain Prone and activation ends."},
  {name:"Leap",category:"AGILITY",type:"ACTIVE",desc:"During a Move Action, this player can attempt to Leap over a single adjacent square. Works as Jumping, but reduces negative modifiers by 1 (minimum -1). Cannot also have the Pogo Trait."},
  {name:"Safe Pair of Hands",category:"AGILITY",type:"ACTIVE",desc:"If this player would be Knocked Down, Fall Over, or Placed Prone while holding the ball, they may place the ball in any adjacent unoccupied square instead of letting it Bounce, before becoming Prone."},
  {name:"Sidestep",category:"AGILITY",type:"ACTIVE",desc:"Whenever this player is Pushed Back, their Coach may choose any adjacent unoccupied square for their destination instead of the opposing Coach choosing. Cannot be used if no adjacent unoccupied squares exist."},
  {name:"Sprint",category:"AGILITY",type:"ACTIVE",desc:"When this player performs a Move Action, they may attempt to Rush one additional time beyond normal limits."},
  {name:"Sure Feet",category:"AGILITY",type:"ACTIVE",desc:"Once per Turn, this player may re-roll a single D6 when attempting to Rush."},
  {name:"Dirty Player",category:"DEVIOUS",type:"ACTIVE",desc:"When this player performs a Foul Action, they may apply a +1 modifier to either the Armour Roll or Injury Roll. This modifier may be applied after the roll has been made."},
  {name:"Eye Gouge",category:"DEVIOUS",type:"ACTIVE",desc:"When an opposition player is Pushed Back by this player, that opposition player cannot provide Offensive or Defensive Assists until after they are next activated."},
  {name:"Fumblerooski",category:"DEVIOUS",type:"ACTIVE",desc:"When this player performs a Move Action while holding the ball, they may place the ball on the ground in any square they move out of during their Move Action. This will not cause a Turnover."},
  {name:"Lethal Flight",category:"DEVIOUS",type:"ACTIVE",desc:"When thrown via Throw Team-mate and lands on (or Bounces into) an opposition player who is Knocked Down, this player may apply a +1 modifier to the Armour or Injury Roll. If a Casualty results, this player earns Star Player Points. Requires the Right Stuff Trait."},
  {name:"Lone Fouler",category:"DEVIOUS",type:"ACTIVE",desc:"When this player performs a Foul Action with no Offensive or Defensive Assists present, they may re-roll a failed Armour Roll."},
  {name:"Pile Driver",category:"DEVIOUS",type:"ACTIVE",desc:"When this player Knocks Down an opposition player during a Block Action, they may perform a free Foul Action against that player (if still Standing and Marking them). This player is then Placed Prone and activation ends."},
  {name:"Put the Boot In",category:"DEVIOUS",type:"ACTIVE",desc:"This player can provide Offensive Assists when a team-mate performs a Foul Action regardless of how many opposition players are Marking this player."},
  {name:"Quick Foul",category:"DEVIOUS",type:"ACTIVE",desc:"This player's activation does not end after performing a Foul Action, and they may continue their Move Action with any remaining movement."},
  {name:"Saboteur",category:"DEVIOUS",type:"ACTIVE",desc:"When Knocked Down by an opposition Block Action, before the Armour Roll, roll a D6. On 4+, the opposition player is also Knocked Down (no Turnover unless they held the ball), but this player is automatically Knocked Out and no Armour Roll is made for them. Requires Secret Weapon Trait."},
  {name:"Shadowing",category:"DEVIOUS",type:"ACTIVE",desc:"Each time an opposing player attempts to Dodge out of this player's Tackle Zone, roll a D6. On 4+, this player is immediately placed into the vacated square. May be used up to MA times per Turn. Only one player with this Skill may react at a time."},
  {name:"Sneaky Git",category:"DEVIOUS",type:"ACTIVE",desc:"This player is not Sent-off when performing a Foul Action if a natural double is rolled on the Armour Roll, so long as the target player's Armour is not broken."},
  {name:"Violent Innovator",category:"DEVIOUS",type:"ACTIVE",desc:"If an opposition player suffers a Casualty from a Special Action this player performed, this player earns Star Player Points for causing a Casualty. Requires a Trait that allows Special Actions."},
  {name:"Block",category:"GENERAL",type:"ACTIVE",desc:"A player with this Skill may choose not to be Knocked Down when a Both Down result is applied during a Block Action they are part of."},
  {name:"Dauntless",category:"GENERAL",type:"ACTIVE",desc:"When performing a Block Action against an opponent with higher Strength (before modifiers), roll a D6 and add this player's Strength. If the result exceeds the opponent's unmodified Strength, this player matches that Strength for the duration of the Block. Make a separate roll for each Block if Frenzy applies."},
  {name:"Fend",category:"GENERAL",type:"ACTIVE",desc:"When Pushed Back by a Block Action, the opposition player may not Follow-up. Cannot be used against a player with the Ball & Chain Trait or a Juggernaut player performing a Blitz Action."},
  {name:"Frenzy*",category:"GENERAL",type:"ACTIVE",desc:"Every time this player performs a Block Action and the target is Pushed Back, they must Follow-up. If the target is still Standing after being Pushed Back, this player must perform a second Block Action against the same target (Blitz costs 1 extra square or a Rush). Cannot have Grab, Hit & Run, or Multiple Block."},
  {name:"Kick",category:"GENERAL",type:"ACTIVE",desc:"If nominated as the kicking player, the Coach may choose for the kick to only Deviate D3 squares rather than the usual D6."},
  {name:"Pro",category:"GENERAL",type:"ACTIVE",desc:"During this player's activation, they may attempt to re-roll a single die by rolling a D6: on 3+ the re-roll is granted; on 1-2 it is not. Cannot re-roll Armour, Injury, or Casualty rolls, rolls made outside activation, or rolls not made on this player's behalf. Once used, no other re-roll source may be applied."},
  {name:"Steady Footing",category:"GENERAL",type:"ACTIVE",desc:"Whenever this player would be Knocked Down or Fall Over, roll a D6. On a 6, they do not get Knocked Down or Fall Over and may continue activation normally — no Turnover caused."},
  {name:"Strip Ball",category:"GENERAL",type:"ACTIVE",desc:"When performing a Block Action against a ball-carrier, if the opponent is Pushed Back they drop the ball in the Pushed Back square where it Bounces. This Bounce occurs before the opponent becomes Prone but after this player chooses to Follow-up."},
  {name:"Sure Hands",category:"GENERAL",type:"ACTIVE",desc:"This player may re-roll the D6 when attempting to pick up the ball (not during Secure the Ball). Additionally, the Strip Ball Skill cannot be used against this player."},
  {name:"Tackle",category:"GENERAL",type:"ACTIVE",desc:"Opposition players cannot use the Dodge Skill when attempting to Dodge away from this player's Tackle Zone. Additionally, when this player blocks, the opponent does not count as having Dodge if a Stumble result is selected."},
  {name:"Taunt",category:"GENERAL",type:"ACTIVE",desc:"When this player is Pushed Back by a Block Action, their Coach may choose to make the opposition player Follow-up. Cannot be used against a Rooted player (Take Root Trait)."},
  {name:"Wrestle",category:"GENERAL",type:"ACTIVE",desc:"When a Both Down result is applied during a Block Action (as attacker or defender), this player may choose to Place both players Prone, regardless of any other Skills either player possesses."},
  {name:"Big Hand",category:"MUTATION",type:"ACTIVE",desc:"This player ignores all negative modifiers when attempting to pick up the ball."},
  {name:"Claws",category:"MUTATION",type:"PASSIVE",desc:"Whenever an Armour Roll is made for an opposition player Knocked Down by this player during a Block Action, any natural 8+ on the Armour Roll breaks armour regardless of the opposition player's actual Armour Value."},
  {name:"Disturbing Presence*",category:"MUTATION",type:"PASSIVE",desc:"Any opposition player performing a Pass, Throw Team-mate, or Throw Bomb Action, or attempting to Intercept or Catch, applies a -1 modifier to their Passing Ability or Agility Test for each player with this Skill within 3 squares of them."},
  {name:"Extra Arms",category:"MUTATION",type:"ACTIVE",desc:"This player applies a +1 modifier to their Agility Test whenever they attempt to Catch, Pick Up or Intercept the ball."},
  {name:"Foul Appearance*",category:"MUTATION",type:"PASSIVE",desc:"Whenever an opposition player attempts to Block or target this player directly with a Special Action, they must first roll a D6. On 2+, the action continues normally; on 1, it is cancelled and the opposition player's activation ends."},
  {name:"Horns",category:"MUTATION",type:"ACTIVE",desc:"Whenever this player declares a Blitz Action, they apply a +1 modifier to their Strength Characteristic for any Block Actions performed during that Blitz Action."},
  {name:"Iron Hard Skin",category:"MUTATION",type:"PASSIVE",desc:"Opposition players cannot apply any modifiers when making an Armour Roll against this player. Additionally, the Claws Skill cannot be used against this player."},
  {name:"Monstrous Mouth",category:"MUTATION",type:"ACTIVE",desc:"This player may declare a Chomp Special Action (no limit per Turn). Select a Standing Marking opposition player and roll a D6. On 3+, the opposition player is Chomped and cannot leave the square while Marking remains. Also, Strip Ball cannot be used against this player."},
  {name:"Prehensile Tail",category:"MUTATION",type:"ACTIVE",desc:"When an opposition player attempts to Dodge, Jump or Leap away from this player's Tackle Zone, they apply an additional -1 modifier to the Agility Test. Only one player with this Skill may react at a time."},
  {name:"Tentacles",category:"MUTATION",type:"ACTIVE",desc:"When an opposition player tries to Dodge, Jump or Leap away, roll D6 + this player's Strength minus the opposition's Strength. On 6+ (or natural 6) the opposition player fails and activation ends. On 5- (or natural 1), no effect. Only one player with this Skill may react at a time."},
  {name:"Two Heads",category:"MUTATION",type:"ACTIVE",desc:"This player may apply a +1 modifier to the Agility Test whenever they attempt to Dodge."},
  {name:"Very Long Legs",category:"MUTATION",type:"ACTIVE",desc:"This player applies a +1 modifier when Leaping or Jumping, and a +2 modifier when attempting to Intercept. Additionally, this player ignores the Cloud Burster Skill."},
  {name:"Accurate",category:"PASSING",type:"ACTIVE",desc:"When this player performs a Quick Pass or Short Pass, they may apply a +1 modifier to the Passing Ability Test."},
  {name:"Cannoneer",category:"PASSING",type:"ACTIVE",desc:"When this player performs a Long Pass or Long Bomb, they may apply a +1 modifier to the Passing Ability Test."},
  {name:"Cloud Burster",category:"PASSING",type:"ACTIVE",desc:"When this player performs a Pass Action, opposition players may not attempt to Intercept the ball."},
  {name:"Dump-Off",category:"PASSING",type:"ACTIVE",desc:"When an opposition player attempts to Block or directly target this player with a Special Action, this player may immediately perform a Quick Pass before the action resolves. The Quick Pass cannot cause a Turnover. The targeting action then continues normally."},
  {name:"Give and Go",category:"PASSING",type:"ACTIVE",desc:"If this player performs a Quick Pass or Hand-off without causing a Turnover, their activation does not end; they may continue their Move Action with remaining movement."},
  {name:"Hail Mary Pass",category:"PASSING",type:"ACTIVE",desc:"When performing a Pass or Throw Bomb Special Action, this player may declare any square on the pitch as the target. Treat as a Long Bomb Passing Ability Test; any Accurate result is treated as Inaccurate. A Hail Mary Pass cannot be Intercepted."},
  {name:"Leader",category:"PASSING",type:"PASSIVE",desc:"If one or more players with this Skill are on the pitch at the start of a half, the team gains one extra Leader Re-roll. Lost if all Leader Skill players are removed before it is used. Immune to Halfling Master Chef; otherwise follows standard Team Re-roll rules."},
  {name:"Nerves of Steel",category:"PASSING",type:"ACTIVE",desc:"This player may ignore any modifiers for being Marked when making an Agility Test to Catch the ball or a Passing Ability Test to Pass the ball."},
  {name:"On the Ball",category:"PASSING",type:"ACTIVE",desc:"When an opposition player declares a Pass Action (after target square is declared), this player may move up to 3 squares (no Rush). If they Fall Over, movement ends and the Pass continues. Also, after kick deviation during Start of Drive, one Open receiver with this Skill may move up to 3 squares."},
  {name:"Pass",category:"PASSING",type:"ACTIVE",desc:"This player may re-roll any failed Passing Ability Test when performing a Pass Action."},
  {name:"Punt",category:"PASSING",type:"ACTIVE",desc:"This player may declare a Punt Special Action (once per Turn). They may first Move, then Punt using the Throw-in Template — roll D6 for direction, D6 for distance. With the Kick Skill, may re-roll either die. Ball may Bounce if it lands on a player who fails to Catch it."},
  {name:"Safe Pass",category:"PASSING",type:"ACTIVE",desc:"If this player rolls a natural 1 on a Passing Ability Test, it does not result in a Fumbled Pass. Instead, the player retains the ball and activation ends immediately. No Turnover is caused."},
  {name:"Arm Bar",category:"STRENGTH",type:"ACTIVE",desc:"If an opposing player Falls Over attempting to Dodge, Leap or Jump away from this player's Tackle Zone, this player may apply a +1 modifier to the Armour or Injury Roll. If this causes a Casualty, this player earns Star Player Points. Only one player with this Skill may react at a time."},
  {name:"Brawler",category:"STRENGTH",type:"ACTIVE",desc:"When this player declares a Block Action, they may re-roll a single Both Down result."},
  {name:"Break Tackle",category:"STRENGTH",type:"ACTIVE",desc:"Once per Turn, when this player attempts to Dodge, they may apply +1 to the Agility Test if ST is 3 or lower, +2 if ST is 4, or +3 if ST is 5 or higher."},
  {name:"Bullseye",category:"STRENGTH",type:"ACTIVE",desc:"When this player performs a Throw Team-mate Action and the result is a Superb Throw, the thrown player will not Scatter and instead lands directly in the target square. Requires Throw Team-mate Trait."},
  {name:"Grab",category:"STRENGTH",type:"ACTIVE",desc:"When this player performs a Block Action and the opponent is Pushed Back, their Coach may choose any adjacent unoccupied square as the Pushed Back destination. Also, the Sidestep Skill cannot be used against this player's Block Actions. Cannot have Frenzy."},
  {name:"Guard",category:"STRENGTH",type:"ACTIVE",desc:"This player can provide Offensive and Defensive Assists when a player performs a Block Action regardless of how many opposition players are Marking this player."},
  {name:"Juggernaut",category:"STRENGTH",type:"ACTIVE",desc:"When this player declares a Blitz Action, they may treat any Both Down result as Pushed Back. Additionally, when performing a Block Action as part of a Blitz, opposition players cannot use Fend, Stand Firm, or Wrestle."},
  {name:"Mighty Blow",category:"STRENGTH",type:"ACTIVE",desc:"Whenever this player Knocks Down an opposition player during a Block Action (even if this player is also Knocked Down), they may apply a +1 modifier to either the Armour Roll or Injury Roll. This modifier may be applied after the roll has been made."},
  {name:"Multiple Block",category:"STRENGTH",type:"ACTIVE",desc:"This player may perform two simultaneous Block Actions against different Marking players. Their Strength is reduced by 2 for both, they cannot Follow-up, and both actions resolve fully even if one causes a Turnover. Cannot have Frenzy."},
  {name:"Stand Firm",category:"STRENGTH",type:"ACTIVE",desc:"When this player would be Pushed Back during a Block Action (including Chain Push), they may choose to remain in their current square. This does not prevent a Frenzy player from performing a second Block Action so long as this player is still Standing."},
  {name:"Strong Arm",category:"STRENGTH",type:"ACTIVE",desc:"When this player performs a Throw Team-mate Action, they may apply a +1 modifier to the Passing Ability Test. Requires Throw Team-mate Trait."},
  {name:"Thick Skull",category:"STRENGTH",type:"PASSIVE",desc:"When an Injury Roll is made for this player, they are only Knocked-out on a 9 (an 8 is treated as Stunned). With the Stunty Trait, only Knocked-out on an 8 (a 7 is treated as Stunned)."},
  {name:"Always Hungry*",category:"TRAITS",type:"ACTIVE",desc:"Before a Throw Team-mate Action, roll a D6. On 2+, proceed normally. On 1, roll again: on 2+ the team-mate squirms free (Fumbled Throw); on 1, the team-mate is eaten and immediately removed — no Apothecary or Regeneration. A Turnover is caused."},
  {name:"Animal Savagery*",category:"TRAITS",type:"PASSIVE",desc:"When activated, after declaring action, roll a D6 (+2 if Block or Blitz). On 4+, act normally. On 1-3, Knock Down an adjacent Standing team-mate (no Turnover unless they held the ball). If no adjacent Standing team-mates exist, the player becomes Distracted."},
  {name:"Animosity (X)*",category:"TRAITS",type:"ACTIVE",desc:"When this player attempts a Pass or Hand-off to a team-mate matching the keyword in brackets, roll a D6. On 1, they refuse and activation ends. Animosity (all) applies to all team-mates regardless of keywords."},
  {name:"Ball & Chain*",category:"TRAITS",type:"ACTIVE",desc:"This player may only declare Ball & Chain Special Actions. Each activation, use the Throw-in Template + D6 to move. They automatically pass Dodge tests; Shadowing and Tentacles cannot affect them. Collisions with Standing players result in an automatic Block. If Knocked Down for any reason, make an Injury Roll treating Stunned as Knocked Out."},
  {name:"Bloodlust (X+)*",category:"TRAITS",type:"PASSIVE",desc:"When activated, roll a D6 (+1 if Block or Blitz). On equal to or higher than the number in brackets, activate normally. Otherwise, may change to a Move Action but must bite an adjacent Thrall Lineman at activation's end — no bite causes a Turnover and the player becomes Distracted. Must bite before passing, handing off, or scoring."},
  {name:"Bombardier",category:"TRAITS",type:"ACTIVE",desc:"Once per Turn, declare a Throw Bomb Special Action. Thrown like a Pass Action. Bombs that come to rest on the ground explode immediately — Standing players in the square are Knocked Down; adjacent players on 4+ are also hit. A player who catches a bomb must immediately throw it again."},
  {name:"Bone Head*",category:"TRAITS",type:"PASSIVE",desc:"Whenever this player is activated, after declaring their Action, roll a D6. On 2+, proceed normally. On 1, the player becomes Distracted."},
  {name:"Breathe Fire",category:"TRAITS",type:"ACTIVE",desc:"Declare a Breathe Fire Special Action (no limit per Turn). Select a Standing Marking opposition player and roll a D6 (-1 if ST 5+). On 1: this player is Knocked Down. On 2-3: nothing. On 4+: opposition Placed Prone. On natural 6: Knocked Down. Activation ends immediately after."},
  {name:"Chainsaw*",category:"TRAITS",type:"ACTIVE",desc:"Declare a Chainsaw Attack Special Action (no limit per Turn). Roll D6: on 2+, make an Armour Roll against a Marking opposition player with +3. On 1 (Kick-back), this player is Knocked Down instead. If this player is ever Knocked Down or Falls Over for any reason, the Armour Roll against them is made with a +3 modifier."},
  {name:"Decay*",category:"TRAITS",type:"PASSIVE",desc:"Apply a +1 modifier to any Casualty Roll made against this player."},
  {name:"Drunkard*",category:"TRAITS",type:"PASSIVE",desc:"This player applies a -1 modifier to their test whenever they attempt to Rush."},
  {name:"Hatred (X)*",category:"TRAITS",type:"PASSIVE",desc:"Whenever this player performs a Block Action against a player with the same keyword shown in brackets, this player may re-roll a single Player Down result."},
  {name:"Hypnotic Gaze",category:"TRAITS",type:"ACTIVE",desc:"Declare a Hypnotic Gaze Special Action (no limit per Turn). May first make a Move Action. Select an adjacent Standing opposition player and roll a D6. On 1-2: nothing, activation ends. On 3+: the opposition player becomes Distracted, activation ends."},
  {name:"Insignificant*",category:"TRAITS",type:"PASSIVE",desc:"When creating a Team Draft List, you may not include more players with this Trait than players without this Trait."},
  {name:"Kick Team-mate",category:"TRAITS",type:"PASSIVE",desc:"Once per Turn, declare a Kick Team-mate Special Action. Works as Throw Team-mate but does not use the team's Throw Team-mate Action for the Turn. On a Fumbled Throw, immediately make an Injury Roll for the kicked player treating Stunned as Knocked Out."},
  {name:"Loner (X+)*",category:"TRAITS",type:"PASSIVE",desc:"Whenever this player wishes to use a Team Re-roll, they must first roll a D6. On equal to or higher than the number in brackets, they may use the Re-roll normally. On lower, the Re-roll is lost as if used."},
  {name:"My Ball*",category:"TRAITS",type:"PASSIVE",desc:"This player may not willingly give up the ball. They may not declare Pass Actions, Hand-off Actions, or use any Skill or Trait to relinquish possession. They can only lose the ball by being Knocked Down, Placed Prone, Falling Over, or by an opposing Skill, Trait, or special rule."},
  {name:"No Ball*",category:"TRAITS",type:"PASSIVE",desc:"This player may never possess the ball. If required to Catch or Pick Up the ball, they automatically fail as if rolling a natural 1. They may not attempt to Intercept."},
  {name:"Pick-me-up",category:"TRAITS",type:"ACTIVE",desc:"At the end of each opposition Turn, roll a D6 for each Prone team-mate within 3 squares of a Standing player with this Trait. On 5+, that Prone player immediately stands up. A player who just stood up via this Trait may not also use it during the same Turn."},
  {name:"Plague Ridden",category:"TRAITS",type:"PASSIVE",desc:"Once per game, when this player causes a Casualty via Block Action that results in Dead (not saved by Apothecary), add one new Lineman to your Reserves Box. May exceed 16 players for the rest of the game. Cannot be used against Big Guys or players with Decay, Regeneration, or Stunty."},
  {name:"Pogo",category:"TRAITS",type:"ACTIVE",desc:"During movement, this player can Pogo over a single adjacent square. Works as Jumping but ignores all negative modifiers. Cannot have the Leap Skill."},
  {name:"Projectile Vomit",category:"TRAITS",type:"ACTIVE",desc:"Declare a Projectile Vomit Special Action (no limit per Turn). Select an adjacent Standing opposition player and roll a D6. On 2+: make an unmodifiable Armour Roll against them. On 1: make an unmodifiable Armour Roll against this player instead. May replace Block Action in a Blitz, though activation ends after."},
  {name:"Really Stupid*",category:"TRAITS",type:"PASSIVE",desc:"When activated, after declaring action, roll a D6 (+2 if adjacent non-Distracted, non-Really Stupid Standing team-mates). On 4+, act normally. On 1-3, the player becomes Distracted."},
  {name:"Regeneration",category:"TRAITS",type:"PASSIVE",desc:"Whenever this player suffers a Casualty, before the Casualty Roll, roll a D6. On 1-3: suffer the Casualty normally. On 4+: Casualty is ignored and player is placed in the Reserves Box. Star Player Points for the Casualty are still awarded to the opponent."},
  {name:"Right Stuff*",category:"TRAITS",type:"PASSIVE",desc:"This player can be thrown by a team-mate with the Throw Team-mate Trait, even if this player is Prone."},
  {name:"Secret Weapon*",category:"TRAITS",type:"PASSIVE",desc:"At the end of any Drive in which this player took part, they are Sent-off for committing a Foul, even if they are no longer on the pitch at the end of the Drive."},
  {name:"Stab",category:"TRAITS",type:"ACTIVE",desc:"Declare a Stab Special Action (no limit per Turn). Select an adjacent Standing opposition player and make an unmodifiable Armour Roll for them. If broken, make an Injury Roll; otherwise nothing. May replace Block Action in a Blitz, though activation ends after."},
  {name:"Stunty*",category:"TRAITS",type:"PASSIVE",desc:"When Dodging, this player does not suffer negative modifiers for being Marked. However, they apply a -1 modifier when attempting to Intercept. Injury Rolls for this player use the Stunty Injury Table instead."},
  {name:"Swoop",category:"TRAITS",type:"ACTIVE",desc:"When thrown by a Throw Team-mate Action, this player may choose not to Scatter. Instead, use the Throw-in Template: roll D6 for direction and D6 for distance. This player may also re-roll the Agility Test when attempting to land."},
  {name:"Take Root*",category:"TRAITS",type:"PASSIVE",desc:"When activated while Standing, after declaring Action, roll a D6. On 2+, proceed normally. On 1, the player becomes Rooted: no Move Actions, no Follow-up, cannot be Pushed Back or leave their square (except via Knock Out or Casualty). Rooted status ends at the end of a Drive or if Knocked Down or Placed Prone."},
  {name:"Throw Team-mate",category:"TRAITS",type:"ACTIVE",desc:"This player may declare the Throw Team-mate Action, allowing them to throw a team-mate with the Right Stuff Trait according to the standard Throw Team-mate rules."},
  {name:"Timmm-ber!",category:"TRAITS",type:"PASSIVE",desc:"If this player has an MA of 2 or less and attempts to stand up, apply a +1 modifier to the stand up roll for each Open Standing team-mate adjacent to this player. A natural 1 still fails as normal."},
  {name:"Titchy*",category:"TRAITS",type:"PASSIVE",desc:"This player may apply a +1 modifier to their Agility Test when Dodging. However, they do not apply a -1 Tackle Zone modifier when an opposition player attempts to Dodge into a square within this player's Tackle Zone."},
  {name:"Trickster",category:"TRAITS",type:"ACTIVE",desc:"When an opposition player attempts to Block or directly target this player (except Ball & Chain Blocks), before dice are rolled this player may be placed in any adjacent unoccupied square. The Action then proceeds normally. If placed on the ball, this player may attempt to pick it up before dice are rolled."},
  {name:"Unchannelled Fury*",category:"TRAITS",type:"PASSIVE",desc:"When activated, after declaring action, roll a D6 (+2 if Block or Blitz). On 4+, act normally. On 1-3, the player rages incoherently — activation ends immediately."},
  {name:"Unsteady*",category:"TRAITS",type:"PASSIVE",desc:"This player may not declare Secure the Ball Actions."},
];

let deck = [...ALL_CARDS];
let currentIndex = 0;
let isFlipped = false;

function shuffle(arr) {
  for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}
}

function applyFilter() {
  const filter = document.getElementById('categoryFilter').value;
  deck = filter==='ALL' ? [...ALL_CARDS] : ALL_CARDS.filter(c=>c.category===filter);
  currentIndex=0; isFlipped=false;
  document.getElementById('card').classList.remove('flipped');
  showCard();
}

function showCard() {
  if(!deck.length) return;
  const c = deck[currentIndex];
  document.getElementById('frontCategory').textContent = c.category;
  document.getElementById('frontName').textContent = c.name;
  document.getElementById('frontType').textContent = c.type;
  document.getElementById('backName').textContent = c.name;
  document.getElementById('backCategory').textContent = c.category;
  document.getElementById('backType2').textContent = c.type;
  document.getElementById('backBody').textContent = c.desc;
  const total=deck.length;
  const pct=total>1?(currentIndex/(total-1))*100:100;
  document.getElementById('progressFill').style.width=pct+'%';
  document.getElementById('progressLabel').textContent=`${currentIndex+1} / ${total}`;
  document.getElementById('flipBtn').textContent = isFlipped ? 'Hide' : 'Reveal';
}

function handleCardClick() {
  isFlipped=!isFlipped;
  document.getElementById('card').classList.toggle('flipped',isFlipped);
  document.getElementById('flipBtn').textContent=isFlipped?'Hide':'Reveal';
}

function nextCard() {
  if(currentIndex<deck.length-1){currentIndex++;isFlipped=false;document.getElementById('card').classList.remove('flipped');showCard();}
}

function prevCard() {
  if(currentIndex>0){currentIndex--;isFlipped=false;document.getElementById('card').classList.remove('flipped');showCard();}
}

function shuffleDeck() {
  shuffle(deck);currentIndex=0;isFlipped=false;
  document.getElementById('card').classList.remove('flipped');showCard();
}

// ── TOUCH: instant tap + swipe, no 300ms delay ──
let touchStartX = 0, touchStartY = 0, touchMoved = false;
const cardScene = document.getElementById('cardScene');

cardScene.addEventListener('touchstart', e => {
  touchStartX = e.touches[0].clientX;
  touchStartY = e.touches[0].clientY;
  touchMoved = false;
}, { passive: true });

cardScene.addEventListener('touchmove', e => {
  const dx = Math.abs(e.touches[0].clientX - touchStartX);
  const dy = Math.abs(e.touches[0].clientY - touchStartY);
  if (dx > 8 || dy > 8) touchMoved = true;
}, { passive: true });

cardScene.addEventListener('touchend', e => {
  const dx = e.changedTouches[0].clientX - touchStartX;
  const dy = e.changedTouches[0].clientY - touchStartY;
  if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > 40) {
    // horizontal swipe — navigate
    if (dx < 0) nextCard(); else prevCard();
  } else if (!touchMoved) {
    // clean tap — flip instantly, suppress delayed click
    e.preventDefault();
    handleCardClick();
  }
}, { passive: false });

// desktop mouse click only
cardScene.addEventListener('click', () => {
  if (!('ontouchstart' in window)) handleCardClick();
});

document.getElementById('categoryFilter').addEventListener('change', applyFilter);

document.addEventListener('keydown', e => {
  if(e.key==='ArrowRight'||e.key==='ArrowDown') nextCard();
  if(e.key==='ArrowLeft'||e.key==='ArrowUp') prevCard();
  if(e.key===' '||e.key==='Enter'){e.preventDefault();handleCardClick();}
});

shuffle(deck);
showCard();
</script>
</body>
</html>
